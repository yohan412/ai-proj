<div th:fragment="header">
	<header id="header" class="alt">
		<h1><a href="index.html">AIkademia</a></h1>
		<nav id="nav">
			<ul>
				<li class="special">
					<a href="#menu" class="menuToggle"><span>Menu</span></a>
					<div id="menu">
						<ul>
							<li><a th:href="@{/}">Home</a></li>
							<li><a th:href="@{/manage}">generic</a></li>
				            <li><a th:href="@{/}">Deep&nbsp;Analyze</a></li>
							<li><a href="#" class="login-link" onclick="toggleSignupPopup()">Sign Up</a></li>
							<li><a href="#" class="login-link" onclick="toggleLoginPopup()">Log In</a></li>
						</ul>
					</div>
				</li>
			</ul>
		</nav>
	</header>
	
	<div class="login-popup-wrapper">

	    <div id="login-popup" class="popup hidden">
	        <div class="popup-content glass">
	            <h2>Login</h2>
	            <form>
	                <input type="text" placeholder="아이디" required><br>
	                <input type="password" placeholder="비밀번호" required><br>
	                <button type="submit">로그인</button>
					<button type="button" onclick="toggleLoginPopup()">닫기</button>
	            </form>
	        </div>
	    </div>
	</div>
	
	<div class="login-popup-wrapper">
	  <div id="signup-popup" class="popup hidden">
	    <div class="popup-content">
	      <h2>회원가입</h2>
	      <form>
	        <input type="text" placeholder="이름" required />
	        <input type="email" placeholder="이메일" required />
	        <input type="text" placeholder="소속" required />
	        <input type="text" placeholder="아이디" required />
	        <input type="password" placeholder="비밀번호" required />
	        <input type="password" placeholder="비밀번호 확인" required />

	        <button type="submit">가입하기</button>
			<!--<button class="button" type="submit">
			  <div class="button-outer">
			    <div class="button-inner">
			      <span>가입하기</span>
			    </div>
			  </div>
			</button>-->
	        <button type="button" onclick="toggleSignupPopup()">닫기</button>
	      </form>
	    </div>
	  </div>
	</div>
	
	<video id="webcam" autoplay playsinline width="320" height="240"></video>
	<script>
	// 1) 웹캠 스트림 요청
	navigator.mediaDevices.getUserMedia({ video: true })
	  .then(stream => {
	    const video = document.getElementById('webcam');
	    video.srcObject = stream;

	    // 2) 일정 간격으로 프레임 캡처 및 전송
	    const canvas = document.createElement('canvas');
	    canvas.width = video.videoWidth;
	    canvas.height = video.videoHeight;
	    const ctx = canvas.getContext('2d');
	    setInterval(() => {
	      ctx.drawImage(video, 0, 0);
	      canvas.toBlob(blob => {
	        const form = new FormData();
	        form.append('frame', blob, 'frame.jpg');
	        // 3) Spring Boot로 POST
	        fetch('/api/gaze/frame', { method: 'POST', body: form });
	      }, 'image/jpeg');
	    }, 200); // 5fps
	  });
	</script>

	<script>
		function toggleLoginPopup() {
		  const login = document.getElementById("login-popup");
		  const signup = document.getElementById("signup-popup");

		  // 회원가입창이 열려 있다면 닫기
		  if (!signup.classList.contains("hidden")) {
		    signup.classList.add("hidden");
		  }

		  // 로그인창 toggle
		  login.classList.toggle("hidden");
		}

		function toggleSignupPopup() {
		  const login = document.getElementById("login-popup");
		  const signup = document.getElementById("signup-popup");

		  // 로그인창이 열려 있다면 닫기
		  if (!login.classList.contains("hidden")) {
		    login.classList.add("hidden");
		  }

		  // 회원가입창 toggle
		  signup.classList.toggle("hidden");
		}
	</script>
</div>